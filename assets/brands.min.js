!function(t,e,n){var i=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=n(i):"function"==typeof define&&define.amd?define(function(){return e[t]=n(i)}):e[t]=n(i)}("enquire",this,function(t){"use strict";function e(t,e){var n,i=0,o=t.length;for(i;o>i&&(n=e(t[i],i),n!==!1);i++);}function n(t){return"[object Array]"===Object.prototype.toString.apply(t)}function i(t){return"function"==typeof t}function o(t){this.options=t,!t.deferSetup&&this.setup()}function r(e,n){this.query=e,this.isUnconditional=n,this.handlers=[],this.mql=t(e);var i=this;this.listener=function(t){i.mql=t,i.assess()},this.mql.addListener(this.listener)}function s(){if(!t)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return o.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},r.prototype={addHandler:function(t){var e=new o(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var n=this.handlers;e(n,function(e,i){return e.equals(t)?(e.destroy(),!n.splice(i,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";e(this.handlers,function(e){e[t]()})}},s.prototype={register:function(t,o,s){var u=this.queries,a=s&&this.browserIsIncapable;return u[t]||(u[t]=new r(t,a)),i(o)&&(o={match:o}),n(o)||(o=[o]),e(o,function(e){i(e)&&(e={match:e}),u[t].addHandler(e)}),this},unregister:function(t,e){var n=this.queries[t];return n&&(e?n.removeHandler(e):(n.clear(),delete this.queries[t])),this}},new s}),!function(t,e){"function"==typeof define&&define.amd?define("savvior",["enquire"],function(n){return t["new GridDispatch()"]=e(n)}):"object"==typeof exports?module.exports=e(require("enquire.js")):t.savvior=e(enquire)}(this,function(t){function e(t,e,n,i){i||!t.dataset?t.setAttribute("data-"+e,n):t.dataset[e]=n}function n(t,e,n){var i,o=0;for(o;o<t.length&&(i=e.call(n,t[o],o),i!==!1);o++);}function i(t){return"function"==typeof t}function o(t,e){for(e in t)return!1;return!0}"function"!=typeof window.CustomEvent&&!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}window.CustomEvent=t,t.prototype=window.CustomEvent.prototype}(),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+o)},o);return t=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var r=function(t){this.columns=null,this.element=t,this.filtered=document.createDocumentFragment(),this.status=!1};r.prototype.setup=function(t,n){if(this.status)return!1;var o=document.createRange(),r=document.createElement("div");o.selectNodeContents(this.element),r.appendChild(o.extractContents()),window.requestAnimationFrame(function(){e(r,"columns",0),this.addColumns(r,t),this.status=!0,i(n)&&n.call(this)}.bind(this))},r.prototype.addColumns=function(t,i){var o,r,s,u=["column","size-1of"+i.columns],a=document.createDocumentFragment(),c=[],d=i.columns;for(this.filterItems(t,i.filter);0!==d--;)o="[data-columns] > *:nth-child("+i.columns+"n-"+d+")",c.push(t.querySelectorAll(o));n(c,function(t){r=document.createElement("div"),s=document.createDocumentFragment(),r.className=u.join(" "),n(t,function(t){s.appendChild(t)}),r.appendChild(s),a.appendChild(r)}),this.element.appendChild(a),e(this.element,"columns",i.columns),this.columns=i.columns},r.prototype.filterItems=function(t,i){if(!i)return t;var o,r,s;return s=Array.prototype.slice.call(t.children),r=t.querySelectorAll("[data-columns] > "+i),n(r,function(t){o=s.indexOf(t),this.filtered.appendChild(t),e(t,"position",o)},this),t},r.prototype.removeColumns=function(){var t,i=document.createRange(),o=document.createElement("div"),r=[];return i.selectNodeContents(this.element),t=Array.prototype.filter.call(i.extractContents().childNodes,function(t){return t instanceof window.HTMLElement}),r.length=t[0].childNodes.length*t.length,n(t,function(e,i){n(e.children,function(e,n){r[n*t.length+i]=e})}),e(o,"columns",0),r.filter(function(t){return!!t}).forEach(function(t){o.appendChild(t)}),o},r.prototype.redraw=function(t,e){var n,o=new CustomEvent("savvior:redraw",{detail:{element:this.element,from:this.columns,to:t.columns,filter:t.filter||null}});window.requestAnimationFrame(function(){this.columns!==t.columns&&(n=this.restoreFiltered(this.removeColumns()),this.addColumns(n,t)),window.dispatchEvent(o),i(e)&&e(this)}.bind(this))},r.prototype.restoreFiltered=function(t){if(0===this.filtered.childNodes.length)return t;var e,i=t;return n(this.filtered.querySelectorAll("[data-position]"),function(t){e=Number(t.getAttribute("data-position")),t.removeAttribute("data-position"),i.insertBefore(t,i.children[e]||null)}),t},r.prototype.restore=function(t,e){if(!this.status)return i(t)&&t(!1),!1;var o,r=document.createDocumentFragment(),s=[],u=new CustomEvent("savvior:restore",{detail:{element:this.element,from:this.columns}});window.requestAnimationFrame(function(){o=this.restoreFiltered(this.removeColumns()),n(o.childNodes,function(t){s.push(t)}),s.forEach(function(t){r.appendChild(t)}),this.element.appendChild(r),this.element.removeAttribute("data-columns"),window.dispatchEvent(u),i(t)&&t.call(e,e||this)}.bind(this))};var s=function(t,e){this.selector=t,this.options=e,this.queryHandlers=[],this.grids=[],this.ready=!1};s.prototype.register=function(){n(document.querySelectorAll(this.selector),function(t){this.grids.push(new r(t,this.options))},this);for(var e in this.options)this.queryHandlers.push(this.constructHandler(e,this.options[e]));return n(this.queryHandlers,function(e){t.register(e.mq,e.handler)}),this.ready=!0,this},s.prototype.constructHandler=function(t){return{mq:t,handler:{deferSetup:!0,setup:function(){this.gridSetup(t)}.bind(this),match:function(){this.gridMatch(t)}.bind(this),destroy:function(){}}}},s.prototype.gridSetup=function(t){var e;n(this.grids,function(n){n.setup(this.options[t],function(){e=new CustomEvent("savvior:setup",{detail:{element:n.element,columns:n.columns,filter:this.filter}}),window.dispatchEvent(e)})},this)},s.prototype.gridMatch=function(t){var e;n(this.grids,function(n){e=new CustomEvent("savvior:match",{detail:{element:n.element,from:n.columns,to:this.options[t].columns,query:t}}),n.redraw(this.options[t],function(){window.dispatchEvent(e)})},this)},s.prototype.unregister=function(e,o){n(this.queryHandlers,function(e){t.unregister(e.mq)}),n(this.grids,function(t){t.restore(function(){this.queryHandlers=[],this.ready=!1,i(e)&&e.call(this,o||this)},this)},this),this.grids=[]};var u=function(){if(!t)throw new Error("enquire.js not present, please load it before calling any methods");this.grids={}};return u.prototype.init=function(t,e){if(!t)throw new TypeError("Missing selector");if("string"!=typeof t)throw new TypeError("Selector must be a string");if("object"!=typeof e)throw new TypeError("Options must be an object");return this.grids[t]?this:document.querySelectorAll(t).length<1?this:(this.grids[t]=new s(t,e),this.grids[t].register(e),window.dispatchEvent(new CustomEvent("savvior:init")),this)},u.prototype.destroy=function(t,e){var r=new CustomEvent("savvior:destroy"),s=void 0===t||o(t)?Object.keys(this.grids):t,u=s.length,a=0,c=function(t){delete this.grids[s[a]],++a===u&&(window.dispatchEvent(r),i(e)&&e.call(t,this))}.bind(this);n(s,function(t){this.grids[t]&&this.grids[t].unregister(c)},this)},u.prototype.ready=function(t){if(void 0===t){var e=[];for(var n in this.grids)this.grids[n].ready&&e.push(n);return e.length>0?e:!1}return this.grids[t]?this.grids[t].ready:!1},new u});var $document=$(document);$triggers=$("#filter a"),$document.ready(function(){triggers.click(function(){$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top-200},200)}),savvior.init(".savvior-grid",{"screen and (max-width: 480px)":{columns:1},"screen and (max-width: 768px)":{columns:2},"screen and (min-width: 768px) and (max-width: 980px)":{columns:3},"screen and (min-width: 980px)":{columns:4}})});